import"../chunks/DsnmJJEf.js";import{g as R,y as H,k as B,z as tt,o as d,i as V,D as it,r as z,v as Q,j as p,m as r,u as D,J as a,l as i,K as t,an as vt,t as U}from"../chunks/CWza-o0X.js";import{s as M,d as lt}from"../chunks/CuqnmXZF.js";import{i as L}from"../chunks/H52-nJyG.js";import{b as et,r as at,s as ct,a as ut}from"../chunks/BF0HNU7Q.js";import{b as ft}from"../chunks/CzeEMMNB.js";import{M as mt}from"../chunks/Um5wwsgQ.js";import{M as pt}from"../chunks/CJXMwzCk.js";import{g as _t}from"../chunks/DLRSbZnq.js";import{a as xt}from"../chunks/CiC7uZ2I.js";import{I as rt,B as ot,e as gt}from"../chunks/CUhktV9x.js";import{s as st}from"../chunks/DCsI5cJY.js";import{s as nt}from"../chunks/Dxmer75P.js";import{a as yt}from"../chunks/CLq6swf3.js";const ht=!0,ie=Object.freeze(Object.defineProperty({__proto__:null,prerender:ht},Symbol.toStringTag,{value:"Module"})),bt=768;class wt extends pt{constructor(e=bt){super(`max-width: ${e-1}px`)}}function kt(j,e){R(e,!0);/**
 * @license @lucide/svelte v0.515.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2022 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2022.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 */let n=at(e,["$$slots","$$events","$$legacy"]);const v=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0"}],["circle",{cx:"12",cy:"12",r:"3"}]];rt(j,et({name:"eye"},()=>n,{get iconNode(){return v},children:(m,A)=>{var _=H(),f=B(_);st(f,()=>e.children??tt),d(m,_)},$$slots:{default:!0}})),V()}function Mt(j,e){R(e,!0);/**
 * @license @lucide/svelte v0.515.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2022 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2022.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 */let n=at(e,["$$slots","$$events","$$legacy"]);const v=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143"}],["path",{d:"m2 2 20 20"}]];rt(j,et({name:"eye-off"},()=>n,{get iconNode(){return v},children:(m,A)=>{var _=H(),f=B(_);st(f,()=>e.children??tt),d(m,_)},$$slots:{default:!0}})),V()}function jt(j,e){R(e,!0);/**
 * @license @lucide/svelte v0.515.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2022 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2022.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 */let n=at(e,["$$slots","$$events","$$legacy"]);const v=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"}]];rt(j,et({name:"copy"},()=>n,{get iconNode(){return v},children:(m,A)=>{var _=H(),f=B(_);st(f,()=>e.children??tt),d(m,_)},$$slots:{default:!0}})),V()}var Pt=p('<span class="text-muted-foreground">未设置</span>'),zt=p('<div class="text-xs text-muted-foreground mt-1">已复制</div>'),Et=p('<section class="mt-6"><div class="bg-card text-card-foreground rounded-lg border shadow-sm p-4"><div class="flex items-center justify-between"><div class="text-sm font-medium">API Key</div> <div class="flex items-center gap-1.5"><!> <!></div></div> <div class="mt-2 font-mono text-sm break-all select-text min-h-5"><!></div> <!></div></section>');function At(j,e){R(e,!0);let n=Q(null),v=Q(!0),m=Q(!1);it(()=>{if(typeof window>"u")return;(()=>{try{z(n,localStorage.getItem("api_key"),!0)}catch{z(n,null)}})();const o=x=>{x.key==="api_key"&&z(n,x.newValue,!0)};return window.addEventListener("storage",o),()=>window.removeEventListener("storage",o)});const A=D(()=>{if(!r(n))return"";if(!r(v))return r(n);const s=r(n).length,o=r(n).slice(Math.max(0,s-4));return"•".repeat(Math.max(0,s-4))+o});function _(){z(v,!r(v))}async function f(){if(r(n))try{if(navigator?.clipboard?.writeText)await navigator.clipboard.writeText(r(n));else{const s=document.createElement("textarea");s.value=r(n),s.style.position="fixed",s.style.left="-9999px",document.body.appendChild(s),s.select(),document.execCommand("copy"),document.body.removeChild(s)}z(m,!0),setTimeout(()=>z(m,!1),1200)}catch{}}var g=Et(),C=a(g),y=a(C),l=i(a(y),2),c=a(l);{let s=D(()=>r(v)?"显示":"隐藏"),o=D(()=>r(v)?"显示":"隐藏");ot(c,{variant:"ghost",size:"icon",class:"size-8",onclick:_,get title(){return r(s)},get"aria-label"(){return r(o)},children:(x,N)=>{var k=H(),u=B(k);{var K=P=>{kt(P,{class:"size-4"})},O=P=>{Mt(P,{class:"size-4"})};L(u,P=>{r(v)?P(K):P(O,!1)})}d(x,k)},$$slots:{default:!0}})}var h=i(c,2);ot(h,{variant:"ghost",size:"icon",class:"size-8",onclick:f,title:"复制","aria-label":"复制",children:(s,o)=>{jt(s,{class:"size-4"})},$$slots:{default:!0}}),t(l),t(y);var b=i(y,2),S=a(b);{var E=s=>{var o=vt();U(()=>M(o,r(A))),d(s,o)},w=s=>{var o=Pt();d(s,o)};L(S,s=>{r(n)?s(E):s(w,!1)})}t(b);var I=i(b,2);{var T=s=>{var o=zt();d(s,o)};L(I,s=>{r(m)&&s(T)})}t(C),t(g),d(j,g),V()}var Ct=p('<div class="text-muted-foreground text-sm mt-2">加载中…</div>'),It=p('<div class="text-destructive text-sm mt-2"> </div>'),Lt=p('<div class="mt-2 text-xs text-muted-foreground"> </div>'),St=p('<div class="mt-2 text-sm"><div class="flex items-center gap-2"><span class="text-muted-foreground">总数</span> <span class="font-medium"> </span></div> <div class="mt-3 grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-5 gap-2"><div class="rounded-md border px-2 py-1 text-xs flex items-center justify-between"><span>Critical</span><span class="font-mono"> </span></div> <div class="rounded-md border px-2 py-1 text-xs flex items-center justify-between"><span>High</span><span class="font-mono"> </span></div> <div class="rounded-md border px-2 py-1 text-xs flex items-center justify-between"><span>Medium</span><span class="font-mono"> </span></div> <div class="rounded-md border px-2 py-1 text-xs flex items-center justify-between"><span>Low</span><span class="font-mono"> </span></div> <div class="rounded-md border px-2 py-1 text-xs flex items-center justify-between"><span>Info</span><span class="font-mono"> </span></div></div> <!></div>'),Tt=p('<section class="mt-6"><div class="bg-card text-card-foreground rounded-lg border shadow-sm p-4"><div class="flex items-center justify-between"><div class="text-sm font-medium">POC 统计</div></div> <!></div></section>');function Nt(j,e){R(e,!0);var n=Tt(),v=a(n),m=i(a(v),2);{var A=f=>{var g=Ct();d(f,g)},_=f=>{var g=H(),C=B(g);{var y=c=>{var h=It(),b=a(h,!0);t(h),U(()=>M(b,e.error)),d(c,h)},l=c=>{var h=St(),b=a(h),S=i(a(b),2),E=a(S,!0);t(S),t(b);var w=i(b,2),I=a(w),T=i(a(I)),s=a(T,!0);t(T),t(I);var o=i(I,2),x=i(a(o)),N=a(x,!0);t(x),t(o);var k=i(o,2),u=i(a(k)),K=a(u,!0);t(u),t(k);var O=i(k,2),P=i(a(O)),Y=a(P,!0);t(P),t(O);var F=i(O,2),W=i(a(F)),X=a(W,!0);t(W),t(F),t(w);var q=i(w,2);{var Z=J=>{var G=Lt(),$=a(G);t(G),U(()=>M($,`其他分类：${e.counts.other??""}`)),d(J,G)};L(q,J=>{e.counts.other>0&&J(Z)})}t(h),U(()=>{M(E,e.total),M(s,e.counts.critical),M(N,e.counts.high),M(K,e.counts.medium),M(Y,e.counts.low),M(X,e.counts.info)}),d(c,h)};L(C,c=>{e.error?c(y):c(l,!1)},!0)}d(f,g)};L(m,f=>{e.loading?f(A):f(_,!1)})}t(v),t(n),d(j,n),V()}var Kt=p('<div class="text-xs text-muted-foreground"> </div>'),Ot=p('<div class="text-muted-foreground text-sm mt-2">加载中…</div>'),Bt=p('<div class="text-destructive text-sm mt-2"> </div>'),Dt=p('<div class="text-muted-foreground text-sm mt-2">暂无数据</div>'),Ut=p('<li class="py-2"><div class="flex items-center justify-between gap-2"><div class="min-w-0"><div class="truncate text-sm font-medium"> </div> <div class="text-xs text-muted-foreground truncate"> </div></div> <div class="shrink-0 flex items-center gap-2"><span class="rounded-full border px-2 py-0.5 text-xs font-medium"> </span> <span class="text-xs text-muted-foreground"> </span></div></div></li>'),Ht=p('<ul class="mt-2 divide-y"></ul>'),Rt=p('<section class="mt-4"><div class="bg-card text-card-foreground rounded-lg border shadow-sm p-4"><div class="flex items-center justify-between"><div class="text-sm font-medium">最近更新</div> <!></div> <!></div></section>');function Vt(j,e){R(e,!0);function n(l){try{return new Date(l).toLocaleString()}catch{return l}}var v=Rt(),m=a(v),A=a(m),_=i(a(A),2);{var f=l=>{var c=Kt(),h=a(c);t(c),U(b=>M(h,`统计时间：${b??""}`),[()=>n(e.updatedAt)]),d(l,c)};L(_,l=>{e.updatedAt&&l(f)})}t(A);var g=i(A,2);{var C=l=>{var c=Ot();d(l,c)},y=l=>{var c=H(),h=B(c);{var b=E=>{var w=Bt(),I=a(w,!0);t(w),U(()=>M(I,e.error)),d(E,w)},S=E=>{var w=H(),I=B(w);{var T=o=>{var x=Dt();d(o,x)},s=o=>{var x=Ht();gt(x,21,()=>e.updates,N=>N.id,(N,k)=>{var u=Ut(),K=a(u),O=a(K),P=a(O),Y=a(P,!0);t(P);var F=i(P,2),W=a(F,!0);t(F),t(O);var X=i(O,2),q=a(X),Z=a(q,!0);t(q);var J=i(q,2),G=a(J,!0);t(J),t(X),t(K),t(u),U(($,dt)=>{nt(P,"title",r(k).name),M(Y,r(k).name),nt(F,"title",r(k).path),M(W,r(k).path),M(Z,$),M(G,dt)},[()=>(r(k).severity||"").toString().toUpperCase(),()=>n(r(k).updated_at)]),d(N,u)}),t(x),d(o,x)};L(I,o=>{e.updates.length===0?o(T):o(s,!1)})}d(E,w)};L(h,E=>{e.error?E(b):E(S,!1)},!0)}d(l,c)};L(g,l=>{e.loading?l(C):l(y,!1)})}t(m),t(v),d(j,v),V()}function Ft(){xt.removeToken(),_t("/login",{replaceState:!0})}var Jt=p('<button class=" right-3 top-12 z-50 select-none rounded-full border border-foreground/10 bg-background/70 px-3 py-1 text-xs font-medium text-foreground/80 backdrop-blur hover:bg-background shadow-sm transition" aria-label="Logout">退出</button>'),Qt=p('<!> <div class="flex flex-1 flex-col"><div class="container-wrapper section-soft flex-1 pb-6"><div class="container overflow-hidden"><!> <!> <!> <!></div></div></div>',1);function de(j,e){R(e,!0);const[n,v]=ut(),m=()=>ct(ft,"$t",n),A=m()("website_title"),_=m()("website_description"),f=new wt;let g=Q(!1),C=Q(null),y=Q(null);const l=D(()=>r(y)?.by_severity??{critical:0,high:0,medium:0,low:0,info:0,other:0}),c=D(()=>r(y)?.total??0),h=D(()=>(r(y)?.recent_updates??[]).slice(0,5)),b=D(()=>r(y)?.updated_at??null);it(()=>{typeof window>"u"||(z(g,!0),(async()=>{try{const u=await yt.loadPocStats();u?.success&&u?.data?(z(y,u.data,!0),z(C,null)):(z(y,null),z(C,u?.message||"加载失败",!0))}catch(u){z(y,null),z(C,u?.message||"网络错误",!0)}finally{z(g,!1)}})())});var S=Qt(),E=B(S);mt(E,{get title(){return A},get description(){return _}});var w=i(E,2),I=a(w),T=a(I),s=a(T);{var o=u=>{var K=Jt();K.__click=[Ft],d(u,K)};L(s,u=>{f.current||u(o)})}var x=i(s,2);At(x,{});var N=i(x,2);Nt(N,{get loading(){return r(g)},get error(){return r(C)},get total(){return r(c)},get counts(){return r(l)}});var k=i(N,2);Vt(k,{get loading(){return r(g)},get error(){return r(C)},get updates(){return r(h)},get updatedAt(){return r(b)}}),t(T),t(I),t(w),d(j,S),V(),v()}lt(["click"]);export{de as component,ie as universal};
