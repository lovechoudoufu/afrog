import"../chunks/DsnmJJEf.js";import{p as Q,L as H,a as B,M as et,b as v,c as R,j as it,O as j,P as F,f as x,g as r,u as U,d as a,s as d,r as t,Q as dt,t as D,n as lt}from"../chunks/DTlqaqqF.js";import{i as S}from"../chunks/Dic97CoZ.js";import{b as at,r as rt,s as ct,a as ut}from"../chunks/EVjlSd2a.js";import{b as ft}from"../chunks/CdFo6DNb.js";import{M as mt}from"../chunks/DZd9NHnP.js";import{M as pt}from"../chunks/C5n3c0UV.js";import{g as _t}from"../chunks/DGyUsDMg.js";import{a as xt}from"../chunks/c0ftkk0z.js";import{s as M}from"../chunks/DJxU2J0x.js";import{I as st,B as tt,e as gt}from"../chunks/DNp79HPW.js";import{s as ot}from"../chunks/DKBzqZvg.js";import{s as nt}from"../chunks/BzXkOwPe.js";import{a as yt}from"../chunks/DVDQY3a_.js";const ht=!0,oe=Object.freeze(Object.defineProperty({__proto__:null,prerender:ht},Symbol.toStringTag,{value:"Module"})),bt=768;class wt extends pt{constructor(e=bt){super(`max-width: ${e-1}px`)}}function Mt(P,e){Q(e,!0);/**
 * @license @lucide/svelte v0.515.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2022 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2022.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 */let n=rt(e,["$$slots","$$events","$$legacy"]);const l=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0"}],["circle",{cx:"12",cy:"12",r:"3"}]];st(P,at({name:"eye"},()=>n,{get iconNode(){return l},children:(f,E)=>{var p=H(),u=B(p);ot(u,()=>e.children??et),v(f,p)},$$slots:{default:!0}})),R()}function Pt(P,e){Q(e,!0);/**
 * @license @lucide/svelte v0.515.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2022 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2022.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 */let n=rt(e,["$$slots","$$events","$$legacy"]);const l=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143"}],["path",{d:"m2 2 20 20"}]];st(P,at({name:"eye-off"},()=>n,{get iconNode(){return l},children:(f,E)=>{var p=H(),u=B(p);ot(u,()=>e.children??et),v(f,p)},$$slots:{default:!0}})),R()}function jt(P,e){Q(e,!0);/**
 * @license @lucide/svelte v0.515.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2022 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2022.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 */let n=rt(e,["$$slots","$$events","$$legacy"]);const l=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"}]];st(P,at({name:"copy"},()=>n,{get iconNode(){return l},children:(f,E)=>{var p=H(),u=B(p);ot(u,()=>e.children??et),v(f,p)},$$slots:{default:!0}})),R()}var kt=x('<span class="text-muted-foreground">未设置</span>'),zt=x('<div class="text-xs text-muted-foreground mt-1">已复制</div>'),Et=x('<section class="mt-6"><div class="bg-card text-card-foreground rounded-lg border shadow-sm p-4"><div class="flex items-center justify-between"><div class="text-sm font-medium">API Key</div> <div class="flex items-center gap-1.5"><!> <!></div></div> <div class="mt-2 font-mono text-sm break-all select-text min-h-5"><!></div> <!></div></section>');function Lt(P,e){Q(e,!0);let n=F(null),l=F(!0),f=F(!1);it(()=>{if(typeof window>"u")return;(()=>{try{j(n,localStorage.getItem("api_key"),!0)}catch{j(n,null)}})();const o=b=>{b.key==="api_key"&&j(n,b.newValue,!0)};return window.addEventListener("storage",o),()=>window.removeEventListener("storage",o)});const E=U(()=>{if(!r(n))return"";if(!r(l))return r(n);const s=r(n).length,o=r(n).slice(Math.max(0,s-4));return"•".repeat(Math.max(0,s-4))+o});function p(){j(l,!r(l))}async function u(){if(r(n))try{if(navigator?.clipboard?.writeText)await navigator.clipboard.writeText(r(n));else{const s=document.createElement("textarea");s.value=r(n),s.style.position="fixed",s.style.left="-9999px",document.body.appendChild(s),s.select(),document.execCommand("copy"),document.body.removeChild(s)}j(f,!0),setTimeout(()=>j(f,!1),1200)}catch{}}var L=Et(),C=a(L),k=a(C),i=d(a(k),2),c=a(i);{let s=U(()=>r(l)?"显示":"隐藏"),o=U(()=>r(l)?"显示":"隐藏");tt(c,{variant:"ghost",size:"icon",class:"size-8",onclick:p,get title(){return r(s)},get"aria-label"(){return r(o)},children:(b,O)=>{var _=H(),T=B(_);{var m=w=>{Mt(w,{class:"size-4"})},I=w=>{Pt(w,{class:"size-4"})};S(T,w=>{r(l)?w(m):w(I,!1)})}v(b,_)},$$slots:{default:!0}})}var g=d(c,2);tt(g,{variant:"ghost",size:"icon",class:"size-8",onclick:u,title:"复制","aria-label":"复制",children:(s,o)=>{jt(s,{class:"size-4"})},$$slots:{default:!0}}),t(i),t(k);var y=d(k,2),K=a(y);{var z=s=>{var o=dt();D(()=>M(o,r(E))),v(s,o)},h=s=>{var o=kt();v(s,o)};S(K,s=>{r(n)?s(z):s(h,!1)})}t(y);var A=d(y,2);{var N=s=>{var o=zt();v(s,o)};S(A,s=>{r(f)&&s(N)})}t(C),t(L),v(P,L),R()}var At=x('<div class="text-muted-foreground text-sm mt-2">加载中…</div>'),Ct=x('<div class="text-destructive text-sm mt-2"> </div>'),It=x('<div class="mt-2 text-xs text-muted-foreground"> </div>'),St=x('<div class="mt-2 text-sm"><div class="flex items-center gap-2"><span class="text-muted-foreground">总数</span> <span class="font-medium"> </span></div> <div class="mt-3 grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-5 gap-2"><div class="rounded-md border px-2 py-1 text-xs flex items-center justify-between"><span>Critical</span><span class="font-mono"> </span></div> <div class="rounded-md border px-2 py-1 text-xs flex items-center justify-between"><span>High</span><span class="font-mono"> </span></div> <div class="rounded-md border px-2 py-1 text-xs flex items-center justify-between"><span>Medium</span><span class="font-mono"> </span></div> <div class="rounded-md border px-2 py-1 text-xs flex items-center justify-between"><span>Low</span><span class="font-mono"> </span></div> <div class="rounded-md border px-2 py-1 text-xs flex items-center justify-between"><span>Info</span><span class="font-mono"> </span></div></div> <!></div>'),Tt=x('<section class="mt-6"><div class="bg-card text-card-foreground rounded-lg border shadow-sm p-4"><div class="flex items-center justify-between"><div class="text-sm font-medium">POC 统计</div></div> <!></div></section>');function Nt(P,e){Q(e,!0);var n=Tt(),l=a(n),f=d(a(l),2);{var E=u=>{var L=At();v(u,L)},p=u=>{var L=H(),C=B(L);{var k=c=>{var g=Ct(),y=a(g,!0);t(g),D(()=>M(y,e.error)),v(c,g)},i=c=>{var g=St(),y=a(g),K=d(a(y),2),z=a(K,!0);t(K),t(y);var h=d(y,2),A=a(h),N=d(a(A)),s=a(N,!0);t(N),t(A);var o=d(A,2),b=d(a(o)),O=a(b,!0);t(b),t(o);var _=d(o,2),T=d(a(_)),m=a(T,!0);t(T),t(_);var I=d(_,2),w=d(a(I)),q=a(w,!0);t(w),t(I);var V=d(I,2),W=d(a(V)),X=a(W,!0);t(W),t(V),t(h);var G=d(h,2);{var Y=$=>{var J=It(),Z=a(J);t(J),D(()=>M(Z,`其他分类：${e.counts.other??""}`)),v($,J)};S(G,$=>{e.counts.other>0&&$(Y)})}t(g),D(()=>{M(z,e.total),M(s,e.counts.critical),M(O,e.counts.high),M(m,e.counts.medium),M(q,e.counts.low),M(X,e.counts.info)}),v(c,g)};S(C,c=>{e.error?c(k):c(i,!1)},!0)}v(u,L)};S(f,u=>{e.loading?u(E):u(p,!1)})}t(l),t(n),v(P,n),R()}var Ot=x('<div class="text-xs text-muted-foreground"> </div>'),Kt=x('<div class="text-muted-foreground text-sm mt-2">加载中…</div>'),Bt=x('<div class="text-destructive text-sm mt-2"> </div>'),Ut=x('<div class="text-muted-foreground text-sm mt-2">暂无数据</div>'),Dt=x('<li class="py-2"><div class="flex items-center justify-between gap-2"><div class="min-w-0"><div class="truncate text-sm font-medium"> </div> <div class="text-xs text-muted-foreground truncate"> </div></div> <div class="shrink-0 flex items-center gap-2"><span class="rounded-full border px-2 py-0.5 text-xs font-medium"> </span> <span class="text-xs text-muted-foreground"> </span></div></div></li>'),Ht=x('<ul class="mt-2 divide-y"></ul>'),Qt=x('<section class="mt-4"><div class="bg-card text-card-foreground rounded-lg border shadow-sm p-4"><div class="flex items-center justify-between"><div class="text-sm font-medium">最近更新</div> <!></div> <!></div></section>');function Rt(P,e){Q(e,!0);function n(i){try{return new Date(i).toLocaleString()}catch{return i}}var l=Qt(),f=a(l),E=a(f),p=d(a(E),2);{var u=i=>{var c=Ot(),g=a(c);t(c),D(y=>M(g,`统计时间：${y??""}`),[()=>n(e.updatedAt)]),v(i,c)};S(p,i=>{e.updatedAt&&i(u)})}t(E);var L=d(E,2);{var C=i=>{var c=Kt();v(i,c)},k=i=>{var c=H(),g=B(c);{var y=z=>{var h=Bt(),A=a(h,!0);t(h),D(()=>M(A,e.error)),v(z,h)},K=z=>{var h=H(),A=B(h);{var N=o=>{var b=Ut();v(o,b)},s=o=>{var b=Ht();gt(b,21,()=>e.updates,O=>O.id,(O,_)=>{var T=Dt(),m=a(T),I=a(m),w=a(I),q=a(w,!0);t(w);var V=d(w,2),W=a(V,!0);t(V),t(I);var X=d(I,2),G=a(X),Y=a(G,!0);t(G);var $=d(G,2),J=a($,!0);t($),t(X),t(m),t(T),D((Z,vt)=>{nt(w,"title",r(_).name),M(q,r(_).name),nt(V,"title",r(_).path),M(W,r(_).path),M(Y,Z),M(J,vt)},[()=>(r(_).severity||"").toString().toUpperCase(),()=>n(r(_).updated_at)]),v(O,T)}),t(b),v(o,b)};S(A,o=>{e.updates.length===0?o(N):o(s,!1)})}v(z,h)};S(g,z=>{e.error?z(y):z(K,!1)},!0)}v(i,c)};S(L,i=>{e.loading?i(C):i(k,!1)})}t(f),t(l),v(P,l),R()}var Vt=x('<!> <div class="flex flex-1 flex-col"><div class="container-wrapper section-soft flex-1 pb-6"><div class="container overflow-hidden"><!> <!> <!> <!></div></div></div>',1);function ne(P,e){Q(e,!0);const[n,l]=ut(),f=()=>ct(ft,"$t",n),E=f()("website_title"),p=f()("website_description"),u=new wt;function L(){xt.removeToken(),_t("/login",{replaceState:!0})}let C=F(!1),k=F(null),i=F(null);const c=U(()=>r(i)?.by_severity??{critical:0,high:0,medium:0,low:0,info:0,other:0}),g=U(()=>r(i)?.total??0),y=U(()=>(r(i)?.recent_updates??[]).slice(0,5)),K=U(()=>r(i)?.updated_at??null);it(()=>{typeof window>"u"||(j(C,!0),(async()=>{try{const m=await yt.loadPocsStats();m?.success&&m?.data?(j(i,m.data,!0),j(k,null)):(j(i,null),j(k,m?.message||"加载失败",!0))}catch(m){j(i,null),j(k,m?.message||"网络错误",!0)}finally{j(C,!1)}})())});var z=Vt(),h=B(z);mt(h,{get title(){return E},get description(){return p}});var A=d(h,2),N=a(A),s=a(N),o=a(s);{var b=m=>{tt(m,{variant:"outline",size:"sm",onclick:L,"aria-label":"Logout",children:(I,w)=>{lt();var q=dt("退出");v(I,q)},$$slots:{default:!0}})};S(o,m=>{u.current||m(b)})}var O=d(o,2);Lt(O,{});var _=d(O,2);Nt(_,{get loading(){return r(C)},get error(){return r(k)},get total(){return r(g)},get counts(){return r(c)}});var T=d(_,2);Rt(T,{get loading(){return r(C)},get error(){return r(k)},get updates(){return r(y)},get updatedAt(){return r(K)}}),t(s),t(N),t(A),v(P,z),R(),l()}export{ne as component,oe as universal};
