import"../chunks/DsnmJJEf.js";import"../chunks/Ba0Iaimx.js";import{aL as $,k as ee,r as re,aM as ce,z as A,h as fe,aN as ve,u as K,g as b,I as x,G as ae,p as V,Q as S,b as z,c as d,a as j,f as P,Z as m,N as ue,_ as g,J as q,s as B,n as E,aK as Z,aO as me,t as ge}from"../chunks/BCRwuSkr.js";import{e as be,s as pe}from"../chunks/xXmnoW5P.js";import{i as M}from"../chunks/C_bwDQEw.js";import{a as C,r as F}from"../chunks/BdgK4jsd.js";import{c as he,b as J}from"../chunks/BMEr4bha.js";import{p as w,r as D,s as _e}from"../chunks/Ch7Rxxkn.js";import{a as xe,c as we,b as ye,d as U,m as ke,e as I,L as Le,B as Pe,s as Ae}from"../chunks/_SNqVtDP.js";import{s as X}from"../chunks/DSmA3DwW.js";import{g as Se}from"../chunks/p0k5xV6z.js";import{a as ze,A as Be}from"../chunks/LukD1BGS.js";function Y(r,e,t=e){var c=ce(),f=new WeakSet;$(r,"input",o=>{var a=o?r.defaultValue:r.value;if(a=G(r)?H(a):a,t(a),A!==null&&f.add(A),c&&a!==(a=e())){var l=r.selectionStart,p=r.selectionEnd;r.value=a??"",p!==null&&(r.selectionStart=l,r.selectionEnd=Math.min(p,r.value.length))}}),(ee&&r.defaultValue!==r.value||fe(e)==null&&r.value)&&(t(G(r)?H(r.value):r.value),A!==null&&f.add(A)),re(()=>{var o=e();if(r===document.activeElement){var a=ve??A;if(f.has(a))return}G(r)&&o===H(r.value)||r.type==="date"&&!o&&!r.value||o!==r.value&&(r.value=o??"")})}function G(r){var e=r.type;return e==="number"||e==="range"}function H(r){return r===""?null:+r}function Ee(r,e,t=e){$(r,"change",()=>{t(r.files)}),ee&&r.files&&t(r.files),re(()=>{r.files=e()})}const Me=we({component:"label",parts:["root"]});class O{static create(e){return new O(e)}opts;attachment;constructor(e){this.opts=e,this.attachment=xe(this.opts.ref),this.onmousedown=this.onmousedown.bind(this)}onmousedown(e){e.detail>1&&e.preventDefault()}#e=K(()=>({id:this.opts.id.current,[Me.root]:"",onmousedown:this.onmousedown,...this.attachment}));get props(){return b(this.#e)}set props(e){x(this.#e,e)}}var Ce=P("<label><!></label>");function Ie(r,e){const t=ae();V(e,!0);let c=w(e,"id",19,()=>ye(t)),f=w(e,"ref",15,null),o=D(e,["$$slots","$$events","$$legacy","children","child","id","ref","for"]);const a=O.create({id:U.with(()=>c()),ref:U.with(()=>f(),s=>f(s))}),l=K(()=>ke(o,a.props,{for:e.for}));var p=S(),h=z(p);{var v=s=>{var _=S(),y=z(_);X(y,()=>e.child,()=>({props:b(l)})),d(s,_)},i=s=>{var _=Ce();C(_,()=>({...b(l),for:e.for}));var y=m(_);X(y,()=>e.children??ue),g(_),d(s,_)};M(h,s=>{e.child?s(v):s(i,!1)})}d(r,p),j()}function Ve(r,e){V(e,!0);let t=w(e,"ref",15,null),c=D(e,["$$slots","$$events","$$legacy","ref","class"]);var f=S(),o=z(f);{let a=K(()=>I("flex select-none items-center gap-2 text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-50 group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50",e.class));he(o,()=>Ie,(l,p)=>{p(l,_e({"data-slot":"label",get class(){return b(a)}},()=>c,{get ref(){return t()},set ref(h){t(h)}}))})}d(r,f),j()}var je=P("<input/>"),De=P("<input/>");function Ne(r,e){V(e,!0);let t=w(e,"ref",15,null),c=w(e,"value",15),f=w(e,"files",15),o=D(e,["$$slots","$$events","$$legacy","ref","value","type","files","class"]);var a=S(),l=z(a);{var p=v=>{var i=je();F(i),C(i,s=>({"data-slot":"input",class:s,type:"file",...o}),[()=>I("selection:bg-primary dark:bg-input/30 selection:text-primary-foreground border-input ring-offset-background placeholder:text-muted-foreground shadow-xs flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 pt-1.5 text-sm font-medium outline-none transition-[color,box-shadow] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",e.class)]),J(i,s=>t(s),()=>t()),Ee(i,f),Y(i,c),d(v,i)},h=v=>{var i=De();F(i),C(i,s=>({"data-slot":"input",class:s,type:e.type,...o}),[()=>I("border-input bg-background selection:bg-primary dark:bg-input/30 selection:text-primary-foreground ring-offset-background placeholder:text-muted-foreground shadow-xs flex h-9 w-full min-w-0 rounded-md border px-3 py-1 text-base outline-none transition-[color,box-shadow] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",e.class)]),J(i,s=>t(s),()=>t()),Y(i,c),d(v,i)};M(l,v=>{e.type==="file"?v(p):v(h,!1)})}d(r,a),j()}var We=P('<div class="text-sm text-red-600 bg-red-50 border border-red-200 rounded-md p-3"> </div>'),qe=me('<svg class="animate-spin -ml-1 mr-3 h-4 w-4" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg> 登录中...',1),Ge=P('<div><form><div class="flex flex-col gap-6"><div class="flex flex-col items-center gap-2"><a href="/" class="flex flex-col items-center gap-2 font-medium"><div class="flex size-8 items-center justify-center rounded-md"><!></div> <span class="sr-only">Afrog Security.</span></a> <h1 class="text-xl font-bold">Welcome to Afrog Security.</h1></div> <div class="flex flex-col gap-6"><div class="grid gap-3"><!> <!></div> <!> <!></div></div></form></div>');function He(r,e){const t=ae();V(e,!0);let c=w(e,"ref",15,null),f=D(e,["$$slots","$$events","$$legacy","ref","class"]),o=q(""),a=q(!1),l=q("");async function p(n){if(n.preventDefault(),!b(o).trim()){x(l,"请输入密码");return}x(a,!0),x(l,"");try{const u=await ze.login(b(o));u.success?(Ae(u.token),Se("/")):x(l,u.message||"登录失败",!0)}catch(u){u instanceof Be?x(l,u.message,!0):x(l,"登录失败，请重试")}finally{x(a,!1)}}var h=Ge();C(h,n=>({class:n,...f}),[()=>I("flex flex-col gap-6",e.class)]);var v=m(h),i=m(v),s=m(i),_=m(s),y=m(_),te=m(y);Le(te,{class:"size-8"}),g(y),E(2),g(_),E(2),g(s);var Q=B(s,2),N=m(Q),R=m(N);Ve(R,{get for(){return`password-${t}`},children:(n,u)=>{E();var k=Z("Password");d(n,k)},$$slots:{default:!0}});var se=B(R,2);Ne(se,{get id(){return`password-${t}`},type:"password",required:!0,get disabled(){return b(a)},placeholder:"请输入密码",get value(){return b(o)},set value(n){x(o,n,!0)}}),g(N);var T=B(N,2);{var oe=n=>{var u=We(),k=m(u,!0);g(u),ge(()=>pe(k,b(l))),d(n,u)};M(T,n=>{b(l)&&n(oe)})}var ie=B(T,2);Pe(ie,{type:"submit",class:"w-full",get disabled(){return b(a)},children:(n,u)=>{var k=S(),le=z(k);{var ne=L=>{var W=qe();E(),d(L,W)},de=L=>{var W=Z("Login");d(L,W)};M(le,L=>{b(a)?L(ne):L(de,!1)})}d(n,k)},$$slots:{default:!0}}),g(Q),g(i),g(v),g(h),J(h,n=>c(n),()=>c()),be("submit",v,p),d(r,h),j()}var Je=P('<div class="bg-background flex min-h-svh flex-col items-center justify-center gap-6 p-6 md:p-10"><div class="w-full max-w-sm"><!></div></div>');function rr(r){var e=Je(),t=m(e),c=m(t);He(c,{}),g(t),g(e),d(r,e)}export{rr as component};
