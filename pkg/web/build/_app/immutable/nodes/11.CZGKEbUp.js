import"../chunks/DsnmJJEf.js";import"../chunks/rJXfOMTy.js";import{N as R,p as U,f as L,t as I,b as g,c as V,O as i,g as t,P as w,u as q,d as s,a as W,s as u,r,n as X,Q as Y}from"../chunks/DTlqaqqF.js";import{e as Z,s as D}from"../chunks/DJxU2J0x.js";import{b as ee,i as E}from"../chunks/Dic97CoZ.js";import{a as se}from"../chunks/BzXkOwPe.js";import{p as re,a as te,r as ae,s as ie}from"../chunks/EVjlSd2a.js";import{L as oe}from"../chunks/Dkar1jnQ.js";import{I as le,L as ne}from"../chunks/Dw2kLUS0.js";import{B as de,c as fe}from"../chunks/DNp79HPW.js";import{g as ce}from"../chunks/DGyUsDMg.js";import{a as ve,A as pe}from"../chunks/DVDQY3a_.js";import{b as me}from"../chunks/CdFo6DNb.js";import{a as ue}from"../chunks/c0ftkk0z.js";var ge=L("<!> <!>",1),_e=L('<div><form><div class="flex flex-col gap-6"><div class="flex flex-col items-center gap-2"><a href="/" class="flex flex-col items-center gap-2 font-medium"><div class="flex size-8 items-center justify-center rounded-md"><!></div> <span class="sr-only">Afrog Security.</span></a> <h1 class="text-xl font-bold">Afrog Security.</h1> <div class="text-center text-sm"> </div></div> <div class="flex flex-col gap-6"><div class="grid gap-3"><!></div> <!></div></div></form></div>');function xe(_,o){const v=R();U(o,!0);const[x,M]=te(),l=()=>ie(me,"$t",x);let k=re(o,"ref",15,null),N=ae(o,["$$slots","$$events","$$legacy","ref","class"]),p=w(""),f=w(!1),n=w("");async function O(e){if(e.preventDefault(),!t(p).trim()){i(n,l()("please_enter_password"),!0);return}i(f,!0),i(n,"");try{const a=await ve.login(t(p));a.success?(ue.setToken(a.token),ce("/",{replaceState:!0})):(i(n,a.message||l()("login_failed"),!0),i(n,l()("login_failed"),!0))}catch(a){a instanceof pe?i(n,a.message,!0):i(n,l()("login_failed"),!0)}finally{i(f,!1)}}var c=_e();se(c,e=>({class:e,...N}),[()=>fe("flex flex-col gap-6",o.class)]);var $=s(c),A=s($),h=s(A),b=s(h),z=s(b),Q=s(z);oe(Q,{class:"size-"}),r(z),X(2),r(b);var P=u(b,4),T=s(P,!0);r(P),r(h);var S=u(h,2),y=s(S),C=s(y);{let e=q(()=>t(n)?"true":void 0),a=q(()=>l()("please_enter_password"));le(C,{get"aria-invalid"(){return t(e)},get id(){return`password-${v}`},type:"password",required:!0,get disabled(){return t(f)},get placeholder(){return t(a)},get value(){return t(p)},set value(m){i(p,m,!0)}})}r(y);var F=u(y,2);de(F,{type:"submit",class:"w-full",get disabled(){return t(f)},children:(e,a)=>{var m=ge(),j=W(m);{var G=d=>{ne(d,{class:"size-4 animate-spin"})};E(j,d=>{t(f)&&d(G)})}var H=u(j,2);{var J=d=>{var B=Y();I(K=>D(B,K),[()=>l()("login")]),g(d,B)};E(H,d=>{t(f)||d(J)})}g(e,m)},$$slots:{default:!0}}),r(S),r(A),r($),r(c),ee(c,e=>k(e),()=>k()),I(e=>D(T,e),[()=>l()("login_tip")]),Z("submit",$,O),g(_,c),V(),M()}var $e=L('<div class="bg-background flex min-h-svh flex-col items-center justify-center gap-6 p-6 md:p-10"><div class="w-full max-w-sm"><!></div></div>');function De(_){var o=$e(),v=s(o),x=s(v);xe(x,{}),r(v),r(o),g(_,o)}export{De as component};
