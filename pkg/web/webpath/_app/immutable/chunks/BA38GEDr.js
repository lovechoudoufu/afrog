import{i as I,k as O,l as W,a4 as g,g as c,a3 as l,aq as b,u as k,bd as A}from"./CitxP-cn.js";import"./CDikZmMi.js";import{c as T}from"./COao-gbF.js";import{o as h}from"./BWd9SBbi.js";import{M as D}from"./Bdqlf44Q.js";const F=typeof window<"u"?window:void 0;function J(t){let e=t.activeElement;for(;e?.shadowRoot;){const r=e.shadowRoot.activeElement;if(r===e)break;e=r}return e}let Q=class{#t;#e;constructor(e={}){const{window:r=F,document:n=r?.document}=e;r!==void 0&&(this.#t=n,this.#e=T(i=>{const s=h(r,"focusin",i),o=h(r,"focusout",i);return()=>{s(),o()}}))}get current(){return this.#e?.(),this.#t?J(this.#t):null}};new Q;function K(t,e){switch(t){case"post":O(e);break;case"pre":I(e);break}}function V(t,e,r,n={}){const{lazy:i=!1}=n;let s=!i,o=Array.isArray(t)?[]:void 0;K(e,()=>{const a=Array.isArray(t)?t.map(w=>w()):t();if(!s){s=!0,o=a;return}const d=W(()=>r(a,o));return o=a,d})}function z(t,e,r){V(t,"post",e,r)}function U(t,e,r){V(t,"pre",e,r)}z.pre=U;function X(t,e){switch(t){case"local":return e.localStorage;case"session":return e.sessionStorage}}class q{#t;#e;#n;#r;#s;#i=g(0);constructor(e,r,n={}){const{storage:i="local",serializer:s={serialize:JSON.stringify,deserialize:JSON.parse},syncTabs:o=!0,window:a=F}=n;if(this.#t=r,this.#e=e,this.#n=s,a===void 0)return;const d=X(i,a);this.#r=d;const w=d.getItem(e);w!==null?this.#t=this.#o(w):this.#u(r),o&&i==="local"&&(this.#s=T(()=>h(a,"storage",this.#c)))}get current(){this.#s?.(),c(this.#i);const e=this.#o(this.#r?.getItem(this.#e))??this.#t,r=new WeakMap,n=i=>{if(i===null||i?.constructor.name==="Date"||typeof i!="object")return i;let s=r.get(i);return s||(s=new Proxy(i,{get:(o,a)=>(c(this.#i),n(Reflect.get(o,a))),set:(o,a,d)=>(l(this.#i,c(this.#i)+1),Reflect.set(o,a,d),this.#u(e),!0)}),r.set(i,s)),s};return n(e)}set current(e){this.#u(e),l(this.#i,c(this.#i)+1)}#c=e=>{e.key!==this.#e||e.newValue===null||(this.#t=this.#o(e.newValue),l(this.#i,c(this.#i)+1))};#o(e){try{return this.#n.deserialize(e)}catch(r){console.error(`Error when parsing "${e}" from persisted store "${this.#e}"`,r);return}}#u(e){try{e!=null&&this.#r?.setItem(this.#e,this.#n.serialize(e))}catch(r){console.error(`Error when writing value from persisted store "${this.#e}" to ${this.#r}`,r)}}}function _(t){return t.filter(e=>e.length>0)}const N={getItem:t=>null,setItem:(t,e)=>{}},p=typeof document<"u";function Z(t){return typeof t=="function"}function G(t){return t!==null&&typeof t=="object"}const m=Symbol("box"),M=Symbol("is-writable");function H(t){return G(t)&&m in t}function Y(t){return u.isBox(t)&&M in t}function u(t){let e=g(b(t));return{[m]:!0,[M]:!0,get current(){return c(e)},set current(r){l(e,r,!0)}}}function ee(t,e){const r=k(t);return e?{[m]:!0,[M]:!0,get current(){return c(r)},set current(n){e(n)}}:{[m]:!0,get current(){return t()}}}function te(t){return u.isBox(t)?t:Z(t)?u.with(t):u(t)}function re(t){return Object.entries(t).reduce((e,[r,n])=>u.isBox(n)?(u.isWritableBox(n)?Object.defineProperty(e,r,{get(){return n.current},set(i){n.current=i}}):Object.defineProperty(e,r,{get(){return n.current}}),e):Object.assign(e,{[r]:n}),{})}function ne(t){return u.isWritableBox(t)?{[m]:!0,get current(){return t.current}}:t}u.from=te;u.with=ee;u.flatten=re;u.readonly=ne;u.isBox=H;u.isWritableBox=Y;function ie(t,e){const r=RegExp(t,"g");return n=>{if(typeof n!="string")throw new TypeError(`expected an argument of type string, but got ${typeof n}`);return n.match(r)?n.replace(r,e):n}}const se=ie(/[A-Z]/,t=>`-${t.toLowerCase()}`);function oe(t){if(!t||typeof t!="object"||Array.isArray(t))throw new TypeError(`expected an argument of type object, but got ${typeof t}`);return Object.keys(t).map(e=>`${se(e)}: ${t[e]};`).join(`
`)}function ue(t={}){return oe(t).replace(`
`," ")}const ce={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0",transform:"translateX(-100%)"};ue(ce);const ae=typeof window<"u"?window:void 0;function le(t){let e=t.activeElement;for(;e?.shadowRoot;){const r=e.shadowRoot.activeElement;if(r===e)break;e=r}return e}class de{#t;#e;constructor(e={}){const{window:r=ae,document:n=r?.document}=e;r!==void 0&&(this.#t=n,this.#e=T(i=>{const s=h(r,"focusin",i),o=h(r,"focusout",i);return()=>{s(),o()}}))}get current(){return this.#e?.(),this.#t?le(this.#t):null}}new de;const x=u("mode-watcher-mode"),E=u("mode-watcher-theme"),fe=["dark","light","system"];function C(t){return typeof t!="string"?!1:fe.includes(t)}class he{#t="system";#e=p?localStorage:N;#n=this.#e.getItem(x.current);#r=C(this.#n)?this.#n:this.#t;#s=g(b(this.#i()));#i(e=this.#r){return new q(x.current,e,{serializer:{serialize:r=>r,deserialize:r=>C(r)?r:this.#t}})}constructor(){A(()=>z.pre(()=>x.current,(e,r)=>{const n=c(this.#s).current;l(this.#s,this.#i(n),!0),r&&localStorage.removeItem(r)}))}get current(){return c(this.#s).current}set current(e){c(this.#s).current=e}}class me{#t=void 0;#e=!0;#n=g(b(this.#t));#r=typeof window<"u"&&typeof window.matchMedia=="function"?new D("prefers-color-scheme: light"):{current:!1};query(){p&&l(this.#n,this.#r.current?"light":"dark",!0)}tracking(e){this.#e=e}constructor(){A(()=>{I(()=>{this.#e&&this.query()})}),this.query=this.query.bind(this),this.tracking=this.tracking.bind(this)}get current(){return c(this.#n)}}const v=new he,ge=new me;class pe{#t=p?localStorage:N;#e=this.#t.getItem(E.current);#n=this.#e===null||this.#e===void 0?"":this.#e;#r=g(b(this.#s()));#s(e=this.#n){return new q(E.current,e,{serializer:{serialize:r=>typeof r!="string"?"":r,deserialize:r=>r}})}constructor(){A(()=>z.pre(()=>E.current,(e,r)=>{const n=c(this.#r).current;l(this.#r,this.#s(n),!0),r&&localStorage.removeItem(r)}))}get current(){return c(this.#r).current}set current(e){c(this.#r).current=e}}const S=new pe;let B,P,$=!1,f=null;function we(){return f||(f=document.createElement("style"),f.appendChild(document.createTextNode(`* {
		-webkit-transition: none !important;
		-moz-transition: none !important;
		-o-transition: none !important;
		-ms-transition: none !important;
		transition: none !important;
	}`)),f)}function R(t,e=!1){if(typeof document>"u")return;if(!$){$=!0,t();return}if(typeof window<"u"&&window.__vitest_worker__){t();return}clearTimeout(B),clearTimeout(P);const n=we(),i=()=>document.head.appendChild(n),s=()=>{n.parentNode&&document.head.removeChild(n)};function o(){t(),window.requestAnimationFrame(s)}if(typeof window.requestAnimationFrame<"u"){i(),e?o():window.requestAnimationFrame(()=>{o()});return}i(),B=window.setTimeout(()=>{t(),P=window.setTimeout(s,16)},16)}const y=u(void 0),L=u(!0),j=u(!1),ye=u([]),be=u([]);function xe(){const t=k(()=>{if(!p)return;const e=v.current==="system"?ge.current:v.current,r=_(ye.current),n=_(be.current);function i(){const s=document.documentElement,o=document.querySelector('meta[name="theme-color"]');e==="light"?(r.length&&s.classList.remove(...r),n.length&&s.classList.add(...n),s.style.colorScheme="light",o&&y.current&&o.setAttribute("content",y.current.light)):(n.length&&s.classList.remove(...n),r.length&&s.classList.add(...r),s.style.colorScheme="dark",o&&y.current&&o.setAttribute("content",y.current.dark))}return L.current?R(i,j.current):i(),e});return{get current(){return c(t)}}}function Ee(){const t=k(()=>{if(S.current,!p)return;function e(){document.documentElement.setAttribute("data-theme",S.current)}return L.current?R(e,W(()=>j.current)):e(),S.current});return{get current(){return c(t)}}}const _e=xe(),Ce=Ee();export{ye as a,L as b,S as c,_e as d,y as e,Ce as f,ge as g,C as i,be as l,x as m,j as s,E as t,v as u};
