import{a0 as Q,p as R,a as U,f as L,D as V,c as X,t as I,a1 as Y,d as g,e as Z,r as ee,F as ae,a2 as i,j as t,a3 as w,k as P,y as a,g as se,H as q,i as m,w as te,x as E,z as re,A as s,n as ie,a4 as le,v as oe,W as ne}from"../chunks/DsmM-oav.js";import{L as de}from"../chunks/DZJldaQa.js";import{I as fe}from"../chunks/nCsS4JOo.js";import{B as ce}from"../chunks/1tABjCMV.js";import{c as ve}from"../chunks/DvOKnuZx.js";import{a as ue,A as pe}from"../chunks/BdHG13BO.js";import{a as me}from"../chunks/0cZahikN.js";var ge=L("<!> <!>",1),_e=L('<div><form><div class="flex flex-col gap-6"><div class="flex flex-col items-center gap-2"><a href="/" class="flex flex-col items-center gap-2 font-medium"><div class="flex size-8 items-center justify-center rounded-md"><!></div> <span class="sr-only">Afrog Security.</span></a> <h1 class="text-xl font-bold">Afrog Security.</h1> <div class="text-center text-sm"> </div></div> <div class="flex flex-col gap-6"><div class="grid gap-3"><!></div> <!></div></div></form></div>');function xe(_,l){const v=Q();R(l,!0);const[x,F]=ee(),o=()=>te(re,"$t",x);let k=U(l,"ref",15,null),H=ae(l,["$$slots","$$events","$$legacy","ref","class"]),u=w(""),f=w(!1),n=w("");async function M(e){if(e.preventDefault(),!t(u).trim()){i(n,o()("please_enter_password"),!0);return}i(f,!0),i(n,"");try{const r=await ue.login(t(u));r.success?(me.setToken(r.token),ne("/",{replaceState:!0})):(i(n,r.message||o()("login_failed"),!0),i(n,o()("login_failed"),!0))}catch(r){r instanceof pe?i(n,r.message,!0):i(n,o()("login_failed"),!0)}finally{i(f,!1)}}var c=_e();V(c,e=>({class:e,...H}),[()=>ve("flex flex-col gap-6",l.class)]);var $=a(c),A=a($),h=a(A),y=a(h),z=a(y),T=a(z);de(T,{class:"size-"}),s(z),ie(2),s(y);var j=m(y,4),W=a(j,!0);s(j),s(h);var S=m(h,2),b=a(S),C=a(b);{let e=P(()=>t(n)?"true":void 0),r=P(()=>o()("please_enter_password"));fe(C,{get"aria-invalid"(){return t(e)},get id(){return`password-${v}`},type:"password",required:!0,get disabled(){return t(f)},get placeholder(){return t(r)},get value(){return t(u)},set value(p){i(u,p,!0)}})}s(b);var G=m(b,2);ce(G,{type:"submit",class:"w-full",get disabled(){return t(f)},children:(e,r)=>{var p=ge(),B=se(p);{var J=d=>{le(d,{class:"size-4 animate-spin"})};q(B,d=>{t(f)&&d(J)})}var K=m(B,2);{var N=d=>{var D=oe();I(O=>E(D,O),[()=>o()("login")]),g(d,D)};q(K,d=>{t(f)||d(N)})}g(e,p)},$$slots:{default:!0}}),s(S),s(A),s($),s(c),X(c,e=>k(e),()=>k()),I(e=>E(W,e),[()=>o()("login_tip")]),Y("submit",$,M),g(_,c),Z(),F()}var $e=L('<div class="bg-background flex min-h-svh flex-col items-center justify-center gap-6 p-6 md:p-10"><div class="w-full max-w-sm"><!></div></div>');function ze(_){var l=$e(),v=a(l),x=a(v);xe(x,{}),s(v),s(l),g(_,l)}export{ze as component};
